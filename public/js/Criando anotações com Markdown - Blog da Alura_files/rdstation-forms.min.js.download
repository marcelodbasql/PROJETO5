/**
  * Resultados Digitais - 6/26/2019, 4:25:19 PM
  * rdstation-forms - Client Forms generation script with Forms html.
  * @version v0.0.1
  * @link https://github.com/ResultadosDigitais/rdstation-forms/
  * @license ISC
  */
!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o={hostName:"https://cidades.rdstation.com.br",init:function(t,e){var n=this;this.uf_field=e,t.select2({ajax:{url:n.hostName+"/api/cidades/",dataType:"json",delay:250,data:function(t){return{term:t,state_acronym:n.uf_field.val()}},results:function(t,e){return{results:t.cities}},cache:!0},formatResult:n.formatCity,formatSelection:n.formatCity,initSelection:n.selectedCity})},formatCity:function(t){return value=t.name,o.uf_field.val()||(value+=" - "+t.state),value},selectedCity:function(t,e){var n=jQuery(t).val();""!==n&&jQuery.ajax({type:"GET",url:o.hostName+"/api/cidades/"+n,dataType:"json"}).done(function(t){e(t.city)})}};compareVersion=function(t,e){if(r(t)+r(e)!="stringstring")return!1;var n=t.split("."),o=e.split("."),a=Math.max(n.length,o.length);for(i=0;i<a;i++){if(n[i]&&!o[i]&&parseInt(n[i])>0||parseInt(n[i])>parseInt(o[i]))return 1;if(o[i]&&!n[i]&&parseInt(o[i])>0||parseInt(n[i])<parseInt(o[i]))return-1}return 0};var a=function(t){var e,n,i,r,o,a,s,u,c,f,d,l,h;e=function(){var e,d,l;for(n=t.pad||"",i=t.dataBits,r=t.codeBits,o=t.keyString,a=t.arrayData,d=Math.max(i,r),l=0,s=[],e=0;e<d;e+=1)s.push(l),l+=l+1;c=l,u=i/f(i,r)},f=function(t,e){for(var n;0!==e;)n=e,e=t%e,t=n;return t},d=function(t,e,i,r){var f,d,l,h,m,p,y,v;for(v=function(t){r?a?y.push(t):y.push(String.fromCharCode(t)):y.push(o.charAt(t))},m=0,p=0,y=[],d=t.length,f=0;f<d;f+=1){if(p+=e,r){if(l=t.charAt(f),h=o.indexOf(l),l===n)break;if(h<0)throw'the character "'+l+'" is not a member of '+o}else if(((h=a?t[f]:t.charCodeAt(f))|c)!==c)throw h+" is outside the range 0-"+c;for(m=m<<e|h;p>=i;)v(m>>(p-=i)),m&=s[p]}if(!r&&p>0)for(v(m<<i-p),d=y.length%u,f=0;f<d;f+=1)y.push(n);return a&&r?y:y.join("")},l=function(t){return d(t,i,r,!1)},h=function(t){return d(t,r,i,!0)},this.encode=l,this.decode=h,e()},s={formatPhoneMask:function(t){if(s.isBrazilianPhone(t.target)){var e=t.keyCode?t.keyCode:t.which,n=(t.target.selectionStart,this.value),i=n.length;s.ableToAddMask(e,i)&&(n=(n=(n=(n=n.replace(/\D/g,"")).replace(/^(\d{1})/g,"($1")).replace(/^([(]\d{2})/g,"$1) ")).replace(/(\d+)(\d{4})$/,"$1-$2"),this.value=n)}},ableToAddMask:function(t,e){return!(s.isArrow(t)||s.isBackspace(t)&&e<14)},isArrow:function(t){return 37==t||39==t},isBackspace:function(t){return 8==t},isBrazilianPhone:function(t){return"NO_MASK"!==t.dataset.inputMask}};RDStationAutofill=function(){var t=new a({dataBits:8,codeBits:5,keyString:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",pad:"="});function e(t){return["token_rdstation","identificador","c_utmz","traffic_source","captcha","redirect_to","list_id","provider"].indexOf(t[0])>=0||""===t[1]}function n(t){this.$formElement=t}return n.prototype.init=function(){var e=c.prototype.readCookie("_form_fields");e=null===e?"":t.decode(e),this.loadConversion(e)},n.prototype.loadConversion=function(t){if(null!==t){var n=t.split("&");jQuery.each(n,function(t,n){var i=n.split("=");if(!e(i)){var r=decodeURIComponent(i[1]).replace(/\+/g," "),o=decodeURIComponent(i[0]),a=this.$formElement.find(':input[name="'+o+'"]');a.is(":checkbox")||"radio"===a.attr("type")?this.$formElement.find(':input[name="'+o+'"][value="'+r+'"]').attr("checked",!0):a.val(r)}}.bind(this))}},n.prototype.saveConversion=function(){var n=this.$formElement.serialize().split("&"),i=jQuery.map(n,function(t){if(!e(t.split("=")))return t}).join("&");c.prototype.createCookie("_form_fields",t.encode(i),180)},n}();var u=n(1),c=function(){"use strict";function t(t,e){this.formId=t,this.trackCode=e}return t.prototype.setEvents=function(){var t,e,n,i,r=jQuery("#"+this.formId);0!=r.find(".bricks--component-embeddable-form").length?(t=jQuery("<div></div>"),e=r.find("form"),n=jQuery("<div></div>"),i=e.find(".bricks-form__submit button")):(t=jQuery("#ajax-loader-"+this.formId),e=jQuery("form#conversion-form-"+this.formId),n=jQuery("form #error-container-"+this.formId),i=jQuery("form #cf_submit-"+this.formId)),this.$ajaxLoader=t,this.$form=e,this.$errorMessage=n,this.$cfSubmit=i,this.formManager=new d(this.$form),new f(this.formId,this.trackCode).init(),this.isAutofillEnabled()&&(this.autoFill=new RDStationAutofill(this.$form),this.autoFill.init()),compareVersion(jQuery.fn.jquery,"1.7")>=0?this.$form.on("submit",this.handleFormSubmit.bind(this)):this.$form.live("submit",this.handleFormSubmit.bind(this)),this.formManager.setMasksAndFunctions()},t.prototype.handleFormSubmit=function(t){t.preventDefault(),this.$cfSubmit.addClass("hide"),this.$ajaxLoader.removeClass("hide"),this.$errorMessage.addClass("hide"),this.isAutofillEnabled()&&this.autoFill.saveConversion(),this.formManager.validate(this.submitForm.bind(this),this.errorForm.bind(this))},t.prototype.submitForm=function(){this.formManager.setValues();var t="1"==this.$form[0].dataset.typedFields,e=null;e=t?u({formElement:this.$form[0],initialData:{},ignoredElements:[]}):this.$form.serialize(),this.sendData("https://app.rdstation.com.br/api/1.2/conversions.json",e,t)},t.prototype.finishConversion=function(t){var e=JSON.parse(t.target.responseText);this.$cfSubmit.removeClass("hide"),this.$ajaxLoader.addClass("hide");var n=this.$form.find("input[name=thankyou_message]").val();n&&alert(n);var i=e.redirect_to||this.$form.find("input[name='redirect_to']").val();i&&(window.location.href=i)},t.prototype.errorForm=function(t){t&&422===t.status?alert("Desculpe o transtorno, esta ação não está mais disponível."):this.$errorMessage.removeClass("hide"),this.$cfSubmit.removeClass("hide"),this.$ajaxLoader.addClass("hide")},t.prototype.sendData=function(t,e,n){var i=new XMLHttpRequest;i&&(n?(i.open("POST",t,!0),i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i.send(e)):(i.open("GET",t+"?"+e,!0),i.send()),i.onreadystatechange=function(t){4===i.readyState&&(200===i.status?this.finishConversion(t):(this.errorForm(i),console.warn("Failed to reach RD Station.")))}.bind(this))},t.prototype.withjQuery=function(t){!("undefined"==typeof jQuery)?t():this.loadScript("https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js",t)},t.prototype.loadScript=function(t,e){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=t,i.onload=e,i.onreadystatechange=function(){"complete"===this.readyState&&e()},n.appendChild(i)},t.prototype.readCookie=function(t){var e,n,i=document.cookie.split(";");for(t+="=",e=0;e<i.length;e++){for(n=i[e];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null},t.prototype.createCookie=function(t,e,n){var i="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i="; expires="+r.toGMTString()}document.cookie=t+"="+e+i+"; path=/"},t.prototype.isAutofillEnabled=function(){return this.$form.is("[data-form-autofill]")},t.prototype.init=function(){this.withjQuery(function(){jQuery(document).ready(function(){compareVersion(jQuery.fn.jquery,"1.4")>=0?this.setEvents():console.warn("RD Form incompatible with jQuery "+jQuery.fn.jquery+". Please update to 1.7+")}.bind(this))}.bind(this))},t}(),f=function(){"use strict";function t(){return"undefined"!=typeof ga}function e(t,e){this.formId=t,this.trackCode=e}return e.prototype.setViewEvent=function(){if("undefined"!=typeof dataLayer&&t()&&"t0"!==ga.getAll()[0].get("name")){var e=function(){var t=ga.getAll();return function(t,e){try{return function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.get("trackingId")==e)return i}return null}(t,e)}catch(t){return null}}(t,this.trackCode)||t[0]}.call(this).get("name");ga(e+".send","event",{eventCategory:"RD Forms",eventAction:"Viewed",eventLabel:this.formId,nonInteraction:!0})}else t()?ga("send","event","RD Forms","Viewed",this.formId,{nonInteraction:!0}):"undefined"==typeof _gaq||"undefined"==typeof _gat?void 0!==this.trackCode?(console.info("Setting analytics.js code and event"),this.createGoogleAnalyticsCode()):console.warn("No RD Form tracking code"):_gaq.push(["_trackEvent","RD Forms","Viewed",this.formId,0,!0])},e.prototype.createGoogleAnalyticsCode=function(){!function(t,e,n,i,r,o,a){t.GoogleAnalyticsObject=r,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,o=e.createElement(n),a=e.getElementsByTagName(n)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(o,a)}(window,document,"script",0,"ga"),ga("create",this.trackCode),ga("send","event","RD Forms","Viewed",this.formId,{nonInteraction:!0})},e.prototype.init=function(){!1===this.trackCode?console.warn("RD Form tracking code disabled"):setTimeout(function(){this.setViewEvent()}.bind(this),5e3)},e}(),d=function(){"use strict";function t(t){this.$form=t}return t.prototype.setMasksAndFunctions=function(){this.$form.find(".phone").bind("keyup change",s.formatPhoneMask),this.$form.find(".phone").trigger("change"),this.cityInput=this.$form.find("input[name=city_id]"),this.stateInput=this.$form.find("select[name=uf]"),this.withSelect2(function(){o.init(this.cityInput,this.stateInput)}.bind(this))},t.prototype.setValues=function(){this.$form.find("input[name=traffic_source]").val(c.prototype.readCookie("__trf.src")),this.$form.find("input[name=c_utmz]").val(c.prototype.readCookie("__utmz"));var t="";try{t=JSON.parse(decodeURIComponent(c.prototype.readCookie("rdtrk"))).id}catch(t){}this.$form.find("input[name=client_id]").val(t)},t.prototype.validate=function(t,e){this.withValidate(function(){var n=this.$form.validate();this.validateCheckboxes(),this.validatePhones(),n.form()?t():e()}.bind(this))},t.prototype.validateCheckboxes=function(){var t=this.$form;t.find(".field").each(function(){var e=jQuery(this).find(".checkbox:first input:checkbox.required");if(e.length>0){var n=e.attr("name");t.find('[name="'+n+'"]:hidden').remove(),t.find('[name="'+n+'"]').rules("add",{required:!0,minlength:1})}})},t.prototype.validatePhones=function(){this.$form.find("input.phone").each(function(){s.isBrazilianPhone(this)&&jQuery(this).rules("add",{minlength:14,maxlength:15})})},t.prototype.withSelect2=function(t){!(void 0===jQuery.fn.select2)?t():c.prototype.loadScript("https://cdnjs.cloudflare.com/ajax/libs/select2/3.5.2/select2.min.js",t)},t.prototype.withValidate=function(t){!(void 0===jQuery.fn.validate)?t():c.prototype.loadScript("https://d335luupugsy2.cloudfront.net/js/jquery.validate/1.9/jquery.validate.min.js",t)},t}();RDStationForms=function(){"use strict";function t(t,e){this.formId=this.setId(t),this.trackCode=e,this.tempElement=document.createElement("div"),this.headElement=document.getElementsByTagName("head")[0],this.formElement=document.getElementById(this.formId);this.formUrl="https://forms.rdstation.com.br/"+t}return t.prototype.renderTemplate=function(){var t=this.tempElement.querySelector("#form-"+this.formId);this.formElement.appendChild(t)},t.prototype.renderStyles=function(){var t=this.tempElement.querySelector("link");this.headElement.appendChild(t);for(var e=this.tempElement.querySelectorAll("style"),n=0;n<e.length;n++)this.headElement.appendChild(e[n])},t.prototype.getTemplateData=function(t,e){var n=new XMLHttpRequest;n&&(n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?e(n):console.warn("Failed to get options."))},n.send(null))},t.prototype.generateTemplate=function(t){this.tempElement.innerHTML=t,this.renderTemplate(),this.renderStyles(),this.tempElement=null,new c(this.formId,this.trackCode).init()},t.prototype.setId=function(t){return"-html"===t.substr(t.length-5)?t.slice(0,-5):t},t.prototype.createForm=function(){this.getTemplateData(this.formUrl,function(t){this.generateTemplate(t.responseText)}.bind(this))},t}()},function(t,e){var n=function(t){return void 0!==t.type&&void 0!==t.value},i=function(t){return!a(t)||a(t)&&s(t)},r=function(t,e){return 0===e.filter(function(e){return e==t.name}).length},o=function(t){var e=t.type,n=t.name;return"checkbox"===e&&!/\[\]$/g.test(n)},a=function(t){var e=t.type,n=t.name;return!o({type:e,name:n})&&("checkbox"===(e=e.toLowerCase())||"radio"===e)},s=function(t){return t.checked},u=function(t){var e=t.name;return/([\[][0-9a-z_]{0,}[\]])/gi.test(e)},c=function(t){var e=t.name;return[e.match(/^([0-9a-z_]{1,})/gi)[0]].concat(e.match(/([\[][0-9a-z_]{0,}[\]])/gi)).map(f)},f=function(t){return t.replace(/[\[|\]]/g,"")},d=function t(e,n,i,r){var o=e.length-1,a=e[n],s=n!==o?e[n+1]:null;return""!==a&&void 0===i[a]&&(i[a]=""===s?[]:{}),i[a]=n===o?l(r):""===s?i[a].concat([l(r)]):t(e,n+1,i[a],r),i},l=function(t){var e=t.type,n=t.value,i=t.step,r=t.name,a=t.checked;return"number"===(e=e.toLowerCase())?void 0!==i?Number.parseFloat(n):Number.parseInt(n):o({type:e,name:r})?a:n};t.exports=function(t){var e=t.formElement,o=t.initialData,a=t.ignoredElements,s=o||{};return a=a||[],Array.from(e.elements).forEach(function(t){if(n(t)&&i(t)&&r(t,a))if(u(t)){var e=c(t);s=d(e,0,s,t)}else s[t.name]=l(t)}),JSON.stringify(s)}}]);